---
export const prerender = false

let lastPlayed = [];
try {
  const response = await fetch('https://kostin.life/api/music');
  if (!response.ok) {
    console.error('API fetch failed:', response.status, await response.text());
  } else {
    lastPlayed = (await response.json()).lastPlayed;
  }
} catch (e) {
  console.error('Fetch error:', e);
}
---

<html>
  <head>
    <title>Last Played Songs</title>
  </head>
  <body>
    {lastPlayed.map((song) => (
      <p>
        <a href={song.url} target="_blank" rel="noopener noreferrer">
          {song.title}
        </a>
      </p>
    ))}
  </body>
</html>

